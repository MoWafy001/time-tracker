I didn't know much about PHP when I wrote this code, so I impovised a lot.
